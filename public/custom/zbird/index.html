
<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8" /> 
<meta name="viewport" content="width=640, user-scalable=no, target-densitydpi=device-dpi" />
<meta name="apple-mobile-web-app-capable" content="yes">
<title>维斗喜帖-钻石小鸟手机官网-钻石小鸟触屏版-钻石小鸟官网</title>
<meta name="keywords" content="钻石小鸟,维斗喜帖" />
<meta name="description" content="钻石小鸟---维斗喜帖" />
<link href="/favicon.ico" type="image/x-icon" rel="shortcut icon" />
<link rel="stylesheet" type="text/css" href="css/new_publicmoblie.css?r212262" />
<link rel="stylesheet" type="text/css" href="css/mobile_danshenjie2014.css?r212262" />
<script language="JavaScript" type="text/javascript" src="js/wwwcache~baseinfo.js?r212262"></script>
<script type="text/javascript" src="js/jquery-1.8.2.min.js?r212262"></script>
<script type="text/javascript" src="js/wwwcache~new_jqueryeraser.js?r212262"></script>
<script type="text/javascript">
  $(function(){
        $('#redux').eraser({
          progressFunction: function(p) {
            $('#progress').html(Math.round(p*100)+'%');
          }
        });

      });
</script>
</head>
<body>
<div id="wrapBegin" class="wrap">
  <div class="eraserBorder">
    <img id="robot" src="assets/1-4.jpg" width=100% />
    <img id="redux" src="assets/1-5.jpg" />
  </div>
</div>
  <div id="loding"></div>
<div class="wrap" id="scene" style="display:none">
  <div class="sec">
        <section class="sec01">
          <div class="bg_img"> 
            <img src="assets/1-4.jpg" width=100% />
          </div>
          <div class="img_1">
            <img class="img_rotate" src="assets/1-1.png" width=100% />
          </div>
          
          <div class="arrow"></div>
        </section> 
        <section class="sec02">
          <div class="bg_img">
            <img src="assets/2-4.jpg" width=100% />
          </div>
          <div class="img_1">
            <img class="img_rotate" src="assets/2-1.png" width=100% />
          </div>
          <div class="img_2">
            <img class="img_rotate" src="assets/2-2.png" width=100% />
          </div>
          <div class="img_3">
            <img class="img_rotate" src="assets/2-3.png" width=100% />
          </div>
          <div class="arrow"></div>
        </section>
        <section class="sec03">
          <div class="bg_img">
            <img src="assets/3-3.jpg" width=100% />
          </div>
          <div class="img_1">
            <img class="img_rotate" src="assets/3-1.png" width=100% />
          </div>
          <div class="img_2">
            <img class="img_rotate" src="assets/3-2.png" width=100% />
          </div>
          <div class="img_3">
            <img class="img_rotate" src="assets/3-4.png" width=100% />
          </div>
          <div class="arrow"></div>
        </section>
        <section class="sec04">
          <div class="bg_img">
            <img src="assets/4-2.jpg" width=100% />
          </div>
          <div class="img_1">
            <img class="img_rotate" src="assets/4-1.png" width=100% />
          </div>
          
          <div class="arrow"></div>
        </section>
        <section class="sec05">
          <div class="bg_img">
            <img src="assets/5-3.jpg" width=100% />
          </div>
          <div class="img_1">
            <img class="img_rotate" src="assets/5-1.png" width=100% />
          </div>
          <div class="img_2">
            <img class="img_rotate" src="assets/5-2.png" width=100% />
          </div>
          <div class="arrow"></div>
        </section>
        <section class="sec06">
          <div class="bg_img">
            <img src="assets/6-3.jpg" width=100% />
          </div>
          <div class="img_1">
            <img class="img_rotate" src="assets/6-1.png" width=100% />
          </div>
          <div class="img_2">
            <img class="img_rotate" src="assets/6-2.png" width=100% />
          </div>
          <div class="arrow"></div>
        </section>
        <section class="sec07">
          <div class="bg_img">
            <img src="assets/7-4.jpg" width=100% />
          </div>
          <div class="img_1">
            <img class="img_rotate" src="assets/7-1.png" width=100% />
          </div>
          <div class="img_2">
            <img class="img_rotate" src="assets/7-2.png" width=100% />
          </div>
          <div class="img_3">
            <img class="img_rotate" src="assets/7-3.png" width=100% />
          </div>
          <div class="arrow"></div>  
        </section>
        <section class="sec08"> 
          <div class="bg_img">  
            <img src="assets/8-3.jpg" width=100% />
          </div>
          <div class="img_1">
            <img class="img_rotate" src="assets/8-1.png" width=100% />
          </div>
          <div class="arrow"></div> 
        </section>
        <section class="sec09">
          <div class="bg_img">
            <img src="assets/9-5.jpg" width=100% />
          </div>
          <div class="img_1">
            <img class="img_rotate" src="assets/9-1.png" width=100% />
          </div>
          <div class="img_border">
            <div class="img_x">
              <img class="img_rotate" src="assets/9-x.png" width=100% />
            </div>
            <div class="img_2">
              <img class="img_rotate" src="assets/9-2.png" width=100% />
            </div>
            <div class="img_3">
              <img class="img_rotate" src="assets/9-3.png" width=100% />
            </div>
            <div class="img_4">
              <a href="http://www.wedxt.com"><img class="img_rotate" src="assets/9-4.png" width=100% /></a>
            </div>
            <div class="img_6">
              <img class="img_rotate" src="assets/9-6.png" width=100% />
            </div>
          </div>
          <div class="arrow"></div>
        </section> 
        <section class="sec10 sec10_show">
          <div class="bg_img">
            <img src="assets/10-3.jpg" width=100% />
          </div>
        </section>
       
    </div>
    
    <!-- <aside id="aside">
      <img class="logo" src="assets/logo.png" />    
    </aside> -->
</div>   
</body>
<script type="text/javascript">
  $(document).ready(function(){
    initPage();
    $("#loding").hide();
      
  // 分享
  $(".share_btn").click(function(event) {
    $(".share_show").show();
  });

  $(".share_show").click(function(event) {
    $(this).hide();
  });

  });
  // 以下是拖动效果
  var startX = 0,
    startY = 0;
    startX_level = 0,
    startY_level = 0;
    margin = 0;
    margin_level = 0
  var pages = null;
  var curPage = 0;
  var curPage_level = 0;
  var pageWidth = 0,
    pageHeight = 0;
  var lineHeight = 0, secHeight = 0;
  var targetElement = null;
  var scrollPrevent = false, movePrevent = false, touchDown = false;
  var sec_level_number = 0;
  //页面初始化
  function initPage(){
    pageWidth=$(window).width();
    pageHeight=$(".wrap").height();
    pages = $(".wrap section");
    $(".wrap section").css("height",pageHeight);
    sec_level_number=$(".sec_level_border .sec_level").length;
    $(".sec_level_border").css("width",pageWidth*sec_level_number);
    $(".sec_level").css("width",pageWidth);
    $(".sec").addClass("drag");
    animatePage(curPage);
    animatePage_level(curPage);
  }
  
  function onStart (e) {
    if(movePrevent == true){
      event.preventDefault();
      return false;
    }
    /*if($(e.target).parents("#container").length==1){
      scrollPrevent = true;
    }else{
      scrollPrevent = false;
    }
  
    $(".map").on('click', function(e){
      $(".map_show").addClass("show");
    })
  
    if(!$(e.target).parents("#container").length==1){
      $(".map_show").removeClass("show");
    }*/
  
    touchDown = true;
  
    // 起始点，页面位置
    startX = e.pageX;
    startY = e.pageY;
    
    // 水平起始点，页面位置
    //startX_level = e.pageX;
    //startY_level = e.pageY;
  
  
  
  
    $(".sec").addClass("drag");
    $(".sec_level_border").addClass("drag");
    margin = $(".sec").css("-webkit-transform");
    //margin = "matrix(1, 0, 0, 1, 0, -50)";
    margin = margin.replace("matrix(", "");
    margin = margin.replace(")", "");
    margin = margin.split(",");
    margin = parseInt(margin[5]); 
    




    /**************水平******************/
    //margin_level = $(".sec_level_border").css("-webkit-transform");
    
    
    //margin_level = margin_level.replace("matrix(", "");
    
    //margin_level = margin_level.replace(")", "");
    //margin_level = margin_level.split(",");
    //margin_level = parseInt(margin_level[4]);
    
    
  }

  function onMove (e, oe) {
    if(movePrevent == true || touchDown != true){
      event.preventDefault();
      return false;
    }
    //console.log("e.pageX===="+e.pageX);
    //console.log("startX_level===="+startX_level);
    event.preventDefault();
    if( scrollPrevent==false && e.pageY!=startY){
      var temp = margin + e.pageY - startY;
      /*console.log("temp=="+temp);*/
      $(".sec").css("-webkit-transform", "matrix(1, 0, 0, 1, 0, "+temp+")");
      /*var b =  lineHeight / secHeight * temp;
      $(".line").css("-webkit-transform", "matrix(1, 0, 0, 1, 0, "+b+")");*/
    }
    /**************水平******************/
    //if( scrollPrevent==false && e.pageX!=startX_level){
      //var temp_level = margin_level + e.pageX - startX_level;
      /*console.log("temp_level=="+temp_level);*/
      //$(".sec_level_border").css("-webkit-transform", "matrix(1, 0, 0, 1, "+temp_level+", 0)");
    
      /*var b =  lineHeight / secHeight * temp;
      $(".line").css("-webkit-transform", "matrix(1, 0, 0, 1, 0, "+b+")");*/
    //}
  }
  
  function onEnd (e) {
    if(movePrevent == true){
      event.preventDefault();
      return false;
    }
  
    touchDown = false;
  
    if( scrollPrevent==false ){
      // 抬起点，页面位置
      endX = e.pageX;
      endY = e.pageY;
      // swip 事件默认大于50px才会触发，小于这个就将页面归回
      if( Math.abs(endY-startY)<=50) {      
        animatePage(curPage);
      }else{
        if(endY>startY){
          prevPage();
        }else{
          nextPage();
        }
      }
    }
    /*************************水平*****************************/
    if( scrollPrevent==false ){
      // 抬起点，页面位置
      endX_level = e.pageX;
      endY_level = e.pageY;
      // swip 事件默认大于50px才会触发，小于这个就将页面归回
      if( Math.abs(endX_level-startX_level)<=50) {
        animatePage_level(curPage_level);
      }else{
        if(endX_level>startX_level){
          prevPage_level();
        }else{
          nextPage_level();
        }
      }
    }
    
  
    $(".sec").removeClass("drag");
  }
  
  function prevPage_level(){ 
    var newPage_level = curPage_level - 1;
    animatePage_level(newPage_level); 
    
  }
  function nextPage_level(){
    var newPage_level = curPage_level + 1;
    animatePage_level(newPage_level);
  }
  
  
  function animatePage_level( newPage_level ){
    //判断是否为第一页
    if(newPage_level<0){
      newPage_level = 0;
    }
    
    //判断是否为第尾页
    if(newPage_level>$(".sec_level_border .sec_level").length-1){
      newPage_level = $(".sec_level_border .sec_level").length-1;
    }
    //新页码存储
    curPage_level = newPage_level;
    //记录新坐标
    var newMarginLeft = newPage_level * (-pageWidth);
    $(".sec_level_border").css({
      "-webkit-transform" : "matrix(1, 0, 0, 1, "+newMarginLeft+" , 0)"
    });
  
    /*var newTop = -parseInt(curPage*pageHeight*(lineHeight/secHeight));
    $(".line").css({
      "-webkit-transform" : "matrix(1, 0, 0, 1, 0, "+newTop+")"
    });*/
  
    movePrevent = true;
    setTimeout("movePrevent=false;", 300);
  
    
  }
  
  
  
  function prevPage(){
    var newPage = curPage - 1;
    animatePage(newPage);
    
  }
  function nextPage(){
    var newPage = curPage + 1;
    animatePage(newPage);
  }
  
  
  function animatePage( newPage ){
    //判断是否为第一页
    if(newPage<0){
      newPage = 0;
    }
    //判断是否为第尾页
    if(newPage>$(".wrap section").length-1){
      newPage = $(".wrap section").length-1;
    }
    //新页码存储
    curPage = newPage;
    //记录新坐标
    var newMarginTop = newPage * (-pageHeight);
    $(".sec").css({
      "-webkit-transform" : "matrix(1, 0, 0, 1, 0, "+newMarginTop+")"
    });
    //console.log("newMarginTop=="+newMarginTop);
    /*var newTop = -parseInt(curPage*pageHeight*(lineHeight/secHeight));
    $(".line").css({
      "-webkit-transform" : "matrix(1, 0, 0, 1, 0, "+newTop+")"
    });*/
  
    movePrevent = true;
    setTimeout("movePrevent=false;", 300 );
  
    // 每页动画
      if( !$(pages[curPage]).hasClass("sec0" + (curPage+1) + "_show") ){
          $(pages[curPage]).addClass("sec0" + (curPage+1) + "_show");
      }
      $(pages[curPage-1]).removeClass("sec0" + (curPage) + "_show");
      $(pages[curPage+1]).removeClass("sec0" + (curPage+2) + "_show");
      

  }

  function onBridgeReady() {
      var mainTitle= "别这样！我是个纯真的人！",
          mainDesc= "我不是王大锤，我叫张大锤，江湖人称张三炮！这辈子我有三个愿望永远无法实现了，早恋，早婚，早生…",
          mainURL= g_baseUrls.base+"/mobile/danshenjie2014.html",
          mainImgUrl= g_baseUrls.resImg+"/ww3/moblie/danshenjie2014/120x120.jpg";

      //转发朋友圈
      WeixinJSBridge.on("menu:share:timeline", function(e) {
          var data = {
              img_url:mainImgUrl,
              img_width: "120",
              img_height: "120",
              link: mainURL,
              //desc这个属性要加上，虽然不会显示，但是不加暂时会导致无法转发至朋友圈，
              desc: mainDesc,
              title: mainTitle
          };
          WeixinJSBridge.invoke("shareTimeline", data, function(res) {
              WeixinJSBridge.log(res.err_msg);
              location.href=g_baseUrls.base+"/mobile/danshenjie2014.html";
          }); 
      });
      //同步到微博
      WeixinJSBridge.on("menu:share:weibo", function() {
          WeixinJSBridge.invoke("shareWeibo", {
              "content": mainDesc,
              "url": mainURL
          }, function(res) {
              WeixinJSBridge.log(res.err_msg);
              location.href=g_baseUrls.base+"/mobile/danshenjie2014.html";
          });
      });
      //分享给朋友
      WeixinJSBridge.on('menu:share:appmessage', function(argv) {
          WeixinJSBridge.invoke("sendAppMessage", {
              img_url: mainImgUrl,
              img_width: "120",
              img_height: "120",
              link: mainURL,
              desc: mainDesc,
              title: mainTitle
          }, function(res) {
              WeixinJSBridge.log(res.err_msg);
              location.href=g_baseUrls.base+"/mobile/danshenjie2014.html";
          });
      });
  };
  //执行
  document.addEventListener('WeixinJSBridgeReady', function() {
      onBridgeReady();
  });
</script>


</html>

